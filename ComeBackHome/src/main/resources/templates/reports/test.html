<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <meta charset="utf-8">-->
<!--    <title>키워드로 장소검색하고 목록으로 표출하기</title>-->
<!--    <style>-->
<!--        .map_wrap, .map_wrap * {margin:0;padding:0;font-family:'Malgun Gothic',dotum,'돋움',sans-serif;font-size:12px;}-->
<!--        .map_wrap a, .map_wrap a:hover, .map_wrap a:active{color:#000;text-decoration: none;}-->
<!--        .map_wrap {position:relative;width:80%;height:100px; margin-top: 20px;}-->
<!--        #menu_wrap {position:absolute;top:0;left:0;bottom:0;width:300px;margin:10px 0 30px 10px;padding:5px;overflow-y:auto;background:rgba(255, 255, 255, 0.7);z-index: 1;font-size:12px;border-radius: 10px;}-->
<!--        .bg_white {background:#fff;}-->
<!--        #menu_wrap hr {display: block; height: 1px;border: 0; border-top: 2px solid #5F5F5F;margin:3px 0;}-->
<!--        #menu_wrap .option{text-align: center;}-->
<!--        #menu_wrap .option p {margin:10px 0;}-->
<!--        #menu_wrap .option button {margin-left:5px;}-->
<!--        #placesList li {list-style: none;}-->
<!--        #placesList .item {position:relative;border-bottom:1px solid #888;overflow: hidden;cursor: pointer;min-height: 65px;}-->
<!--        #placesList .item span {display: block;margin-top:4px;}-->
<!--        #placesList .item h5, #placesList .item .info {text-overflow: ellipsis;overflow: hidden;white-space: nowrap;}-->
<!--        #placesList .item .info{padding:10px 0 10px 55px;}-->
<!--        #placesList .info .gray {color:#8a8a8a;}-->
<!--        #placesList .info .jibun {padding-left:26px;background:url(https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/places_jibun.png) no-repeat;}-->
<!--        #placesList .info .tel {color:#009900;}-->
<!--        #placesList .item .markerbg {float:left;position:absolute;width:36px; height:37px;margin:10px 0 0 10px;background:url(https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png) no-repeat;}-->
<!--        #placesList .item .marker_1 {background-position: 0 -10px;}-->
<!--        #placesList .item .marker_2 {background-position: 0 -56px;}-->
<!--        #placesList .item .marker_3 {background-position: 0 -102px}-->
<!--        #placesList .item .marker_4 {background-position: 0 -148px;}-->
<!--        #placesList .item .marker_5 {background-position: 0 -194px;}-->
<!--        #placesList .item .marker_6 {background-position: 0 -240px;}-->
<!--        #placesList .item .marker_7 {background-position: 0 -286px;}-->
<!--        #placesList .item .marker_8 {background-position: 0 -332px;}-->
<!--        #placesList .item .marker_9 {background-position: 0 -378px;}-->
<!--        #placesList .item .marker_10 {background-position: 0 -423px;}-->
<!--        #placesList .item .marker_11 {background-position: 0 -470px;}-->
<!--        #placesList .item .marker_12 {background-position: 0 -516px;}-->
<!--        #placesList .item .marker_13 {background-position: 0 -562px;}-->
<!--        #placesList .item .marker_14 {background-position: 0 -608px;}-->
<!--        #placesList .item .marker_15 {background-position: 0 -654px;}-->
<!--        #pagination {margin:10px auto;text-align: center;}-->
<!--        #pagination a {display:inline-block;margin-right:10px;}-->
<!--        #pagination .on {font-weight: bold; cursor: default;color:#777;}-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="map_wrap">-->
<!--    <div id="map" style="width:100%;height:100%;position:relative;overflow:hidden;"></div>-->

<!--    <div id="menu_wrap" class="bg_white">-->
<!--        <div class="option">-->
<!--            <div>-->
<!--                <form onsubmit="searchPlaces(); return false;">-->
<!--                    키워드 : <input type="text" value="이태원 맛집" id="keyword" size="15">-->
<!--                    <button type="submit">검색하기</button>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--        <hr>-->
<!--        <ul id="placesList"></ul>-->
<!--        <div id="pagination"></div>-->
<!--    </div>-->
<!--</div>-->

<!--<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=df3c33f5950a30da0e53e3fcc48cb634&libraries=services"></script>-->
<!--<script>-->
<!--    // 마커를 담을 배열입니다-->
<!--    var markers = [];-->

<!--    var mapContainer = document.getElementById('map'), // 지도를 표시할 div-->
<!--        mapOption = {-->
<!--            center: new kakao.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표-->
<!--            level: 3 // 지도의 확대 레벨-->
<!--        };-->

<!--    // 지도를 생성합니다-->
<!--    var map = new kakao.maps.Map(mapContainer, mapOption);-->

<!--    // 장소 검색 객체를 생성합니다-->
<!--    var ps = new kakao.maps.services.Places();-->

<!--    // 검색 결과 목록이나 마커를 클릭했을 때 장소명을 표출할 인포윈도우를 생성합니다-->
<!--    var infowindow = new kakao.maps.InfoWindow({zIndex:1});-->

<!--    // 키워드로 장소를 검색합니다-->
<!--    searchPlaces();-->

<!--    // 키워드 검색을 요청하는 함수입니다-->
<!--    function searchPlaces() {-->

<!--        var keyword = document.getElementById('keyword').value;-->

<!--        if (!keyword.replace(/^\s+|\s+$/g, '')) {-->
<!--            alert('키워드를 입력해주세요!');-->
<!--            return false;-->
<!--        }-->

<!--        // 장소검색 객체를 통해 키워드로 장소검색을 요청합니다-->
<!--        ps.keywordSearch( keyword, placesSearchCB);-->
<!--    }-->

<!--    // 장소검색이 완료됐을 때 호출되는 콜백함수 입니다-->
<!--    function placesSearchCB(data, status, pagination) {-->
<!--        if (status === kakao.maps.services.Status.OK) {-->

<!--            // 정상적으로 검색이 완료됐으면-->
<!--            // 검색 목록과 마커를 표출합니다-->
<!--            displayPlaces(data);-->

<!--            // 페이지 번호를 표출합니다-->
<!--            displayPagination(pagination);-->

<!--        } else if (status === kakao.maps.services.Status.ZERO_RESULT) {-->

<!--            alert('검색 결과가 존재하지 않습니다.');-->
<!--            return;-->

<!--        } else if (status === kakao.maps.services.Status.ERROR) {-->

<!--            alert('검색 결과 중 오류가 발생했습니다.');-->
<!--            return;-->

<!--        }-->
<!--    }-->

<!--    // 검색 결과 목록과 마커를 표출하는 함수입니다-->
<!--    function displayPlaces(places) {-->

<!--        var listEl = document.getElementById('placesList'),-->
<!--            menuEl = document.getElementById('menu_wrap'),-->
<!--            fragment = document.createDocumentFragment(),-->
<!--            bounds = new kakao.maps.LatLngBounds(),-->
<!--            listStr = '';-->

<!--        // 검색 결과 목록에 추가된 항목들을 제거합니다-->
<!--        removeAllChildNods(listEl);-->

<!--        // 지도에 표시되고 있는 마커를 제거합니다-->
<!--        removeMarker();-->

<!--        for ( var i=0; i<places.length; i++ ) {-->

<!--            // 마커를 생성하고 지도에 표시합니다-->
<!--            var placePosition = new kakao.maps.LatLng(places[i].y, places[i].x),-->
<!--                marker = addMarker(placePosition, i),-->
<!--                itemEl = getListItem(i, places[i]); // 검색 결과 항목 Element를 생성합니다-->

<!--            // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해-->
<!--            // LatLngBounds 객체에 좌표를 추가합니다-->
<!--            bounds.extend(placePosition);-->

<!--            // 마커와 검색결과 항목에 mouseover 했을때-->
<!--            // 해당 장소에 인포윈도우에 장소명을 표시합니다-->
<!--            // mouseout 했을 때는 인포윈도우를 닫습니다-->
<!--            (function(marker, title) {-->
<!--                kakao.maps.event.addListener(marker, 'mouseover', function() {-->
<!--                    displayInfowindow(marker, title);-->
<!--                });-->

<!--                kakao.maps.event.addListener(marker, 'mouseout', function() {-->
<!--                    infowindow.close();-->
<!--                });-->

<!--                itemEl.onmouseover =  function () {-->
<!--                    displayInfowindow(marker, title);-->
<!--                };-->

<!--                itemEl.onmouseout =  function () {-->
<!--                    infowindow.close();-->
<!--                };-->
<!--            })(marker, places[i].place_name);-->

<!--            fragment.appendChild(itemEl);-->
<!--        }-->

<!--        // 검색결과 항목들을 검색결과 목록 Element에 추가합니다-->
<!--        listEl.appendChild(fragment);-->
<!--        menuEl.scrollTop = 0;-->

<!--        // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다-->
<!--        map.setBounds(bounds);-->
<!--    }-->

<!--    // 검색결과 항목을 Element로 반환하는 함수입니다-->
<!--    function getListItem(index, places) {-->

<!--        var el = document.createElement('li'),-->
<!--            itemStr = '<span class="markerbg marker_' + (index+1) + '"></span>' +-->
<!--                '<div class="info">' +-->
<!--                '   <h5>' + places.place_name + '</h5>';-->

<!--        if (places.road_address_name) {-->
<!--            itemStr += '    <span>' + places.road_address_name + '</span>' +-->
<!--                '   <span class="jibun gray">' +  places.address_name  + '</span>';-->
<!--        } else {-->
<!--            itemStr += '    <span>' +  places.address_name  + '</span>';-->
<!--        }-->

<!--        itemStr += '  <span class="tel">' + places.phone  + '</span>' +-->
<!--            '</div>';-->

<!--        el.innerHTML = itemStr;-->
<!--        el.className = 'item';-->

<!--        return el;-->
<!--    }-->

<!--    // 마커를 생성하고 지도 위에 마커를 표시하는 함수입니다-->
<!--    function addMarker(position, idx, title) {-->
<!--        var imageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png', // 마커 이미지 url, 스프라이트 이미지를 씁니다-->
<!--            imageSize = new kakao.maps.Size(36, 37),  // 마커 이미지의 크기-->
<!--            imgOptions =  {-->
<!--                spriteSize : new kakao.maps.Size(36, 691), // 스프라이트 이미지의 크기-->
<!--                spriteOrigin : new kakao.maps.Point(0, (idx*46)+10), // 스프라이트 이미지 중 사용할 영역의 좌상단 좌표-->
<!--                offset: new kakao.maps.Point(13, 37) // 마커 좌표에 일치시킬 이미지 내에서의 좌표-->
<!--            },-->
<!--            markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),-->
<!--            marker = new kakao.maps.Marker({-->
<!--                position: position, // 마커의 위치-->
<!--                image: markerImage-->
<!--            });-->

<!--        marker.setMap(map); // 지도 위에 마커를 표출합니다-->
<!--        markers.push(marker);  // 배열에 생성된 마커를 추가합니다-->

<!--        return marker;-->
<!--    }-->

<!--    // 지도 위에 표시되고 있는 마커를 모두 제거합니다-->
<!--    function removeMarker() {-->
<!--        for ( var i = 0; i < markers.length; i++ ) {-->
<!--            markers[i].setMap(null);-->
<!--        }-->
<!--        markers = [];-->
<!--    }-->

<!--    // 검색결과 목록 하단에 페이지번호를 표시는 함수입니다-->
<!--    function displayPagination(pagination) {-->
<!--        var paginationEl = document.getElementById('pagination'),-->
<!--            fragment = document.createDocumentFragment(),-->
<!--            i;-->

<!--        // 기존에 추가된 페이지번호를 삭제합니다-->
<!--        while (paginationEl.hasChildNodes()) {-->
<!--            paginationEl.removeChild (paginationEl.lastChild);-->
<!--        }-->

<!--        for (i=1; i<=pagination.last; i++) {-->
<!--            var el = document.createElement('a');-->
<!--            el.href = "#";-->
<!--            el.innerHTML = i;-->

<!--            if (i===pagination.current) {-->
<!--                el.className = 'on';-->
<!--            } else {-->
<!--                el.onclick = (function(i) {-->
<!--                    return function() {-->
<!--                        pagination.gotoPage(i);-->
<!--                    }-->
<!--                })(i);-->
<!--            }-->

<!--            fragment.appendChild(el);-->
<!--        }-->
<!--        paginationEl.appendChild(fragment);-->
<!--    }-->

<!--    // 검색결과 목록 또는 마커를 클릭했을 때 호출되는 함수입니다-->
<!--    // 인포윈도우에 장소명을 표시합니다-->
<!--    function displayInfowindow(marker, title) {-->
<!--        var content = '<div style="padding:5px;z-index:1;">' + title + '</div>';-->

<!--        infowindow.setContent(content);-->
<!--        infowindow.open(map, marker);-->
<!--    }-->

<!--    // 검색결과 목록의 자식 Element를 제거하는 함수입니다-->
<!--    function removeAllChildNods(el) {-->
<!--        while (el.hasChildNodes()) {-->
<!--            el.removeChild (el.lastChild);-->
<!--        }-->
<!--    }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<%@ page language="java" contentType="text/html; charset=EUC-KR"
pageEncoding="EUC-KR"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=lez4a7aeq8&submodules=geocoder"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <meta charset="EUC-KR">
    <title>Insert title here</title>
</head>


<body>

<!-- 네이버 지도가 뿌려질 곳 !  -->
<div id="map" style="width:100%;height:75vh; margin: 0 auto;"></div>


</body>


<script type="text/javascript">

    $(function() {

        initMap();

    });


    function initMap() {

        var areaArr = new Array();  // 지역을 담는 배열 ( 지역명/위도경도 )
        areaArr.push(
            /*지역구 이름*/			/*위도*/					/*경도*/
            {location : '강남' , lat : '37.4959854' , lng : '127.0664091'},  // 강남구 중심좌표
            {location : '강동' , lat : '37.5492077' , lng : '127.1464824'},  // 강동구 중심좌표
            {location : '강북' , lat : '37.6469954' , lng : '127.0147158'},  // 강북구 중심좌표
            {location : '강서' , lat : '37.5657617' , lng : '126.8226561'},  // 강서구 중심좌표
            {location : '관악' , lat : '37.4603732' , lng : '126.9536086'},  // 관악구 중심좌표
            {location : '광진' , lat : '37.5574120' , lng : '127.0796211'},  // 광진구 중심좌표
            {location : '구로' , lat : '37.4954856' , lng : '126.858121' },  // 구로구 중심좌표
            {location : '금천' , lat : '37.4600969' , lng : '126.9001546'},  // 금천구 중심좌표
            {location : '노원' , lat : '37.6377533' , lng : '127.0754623'},  // 노원구 중심좌표
            {location : '도봉' , lat : '37.6658609' , lng : '127.0317674'},  // 도봉구 중심좌표
            {location : '동대문' , lat : '37.5838012' , lng : '127.0507003'},  // 동대문구 중심좌표
            {location : '동작' , lat : '37.4965037' , lng : '126.9443073'},  // 동작구 중심좌표
            {location : '마포' , lat : '37.5676507' , lng : '126.8854549'},  // 마포구 중심좌표
            {location : '서대문' , lat : '37.5820369' , lng : '126.9356665'},  // 서대문구 중심좌표
            {location : '서초' , lat : '37.4769528' , lng : '127.0378103'},  // 서초구 중심좌표
            {location : '성동' , lat : '37.5506753' , lng : '127.0409622'},  // 성동구 중심좌표
            {location : '성북' , lat : '37.606991'  , lng : '127.0232185'},  // 성북구 중심좌표
            {location : '송파' , lat : '37.5177941' , lng : '127.1127078'},  // 송파구 중심좌표
            {location : '양천' , lat : '37.5270616' , lng : '126.8561534'},  // 양천구 중심좌표
            {location : '영등포' , lat : '37.520641'  , lng : '126.9139242'},  // 영등포구 중심좌표
            {location : '용산' , lat : '37.5311008' , lng : '126.9810742'},  // 용산구 중심좌표
            {location : '은평' , lat : '37.6176125' , lng : '126.9227004'},  // 은평구 중심좌표
            {location : '종로' , lat : '37.5990998' , lng : '126.9861493'},  // 종로구 중심좌표
            {location : '중구' , lat : '37.5579452' , lng : '126.9941904'},  // 중구 중심좌표
            {location : '중랑구' , lat : '37.598031'  , lng : '127.092931' }   // 중랑구 중심좌표
        );



        let markers = new Array(); // 마커 정보를 담는 배열
        let infoWindows = new Array(); // 정보창을 담는 배열

        var map = new naver.maps.Map('map', {
            center: new naver.maps.LatLng(37.552758094502494, 126.98732600494576), //지도 시작 지점
            zoom: 15
        });




        for (var i = 0; i < areaArr.length; i++) {
            // 지역을 담은 배열의 길이만큼 for문으로 마커와 정보창을 채워주자 !

            var marker = new naver.maps.Marker({
                map: map,
                title: areaArr[i].location, // 지역구 이름
                position: new naver.maps.LatLng(areaArr[i].lat , areaArr[i].lng) // 지역구의 위도 경도 넣기
            });

            /* 정보창 */
            var infoWindow = new naver.maps.InfoWindow({
                content: '<div style="width:200px;text-align:center;padding:10px;"><b>' + areaArr[i].location + '</b><br> - 네이버 지도 - </div>'
            }); // 클릭했을 때 띄워줄 정보 HTML 작성

            markers.push(marker); // 생성한 마커를 배열에 담는다.
            infoWindows.push(infoWindow); // 생성한 정보창을 배열에 담는다.
        }


        function getClickHandler(seq) {

            return function(e) {  // 마커를 클릭하는 부분
                var marker = markers[seq], // 클릭한 마커의 시퀀스로 찾는다.
                    infoWindow = infoWindows[seq]; // 클릭한 마커의 시퀀스로 찾는다

                if (infoWindow.getMap()) {
                    infoWindow.close();
                } else {
                    infoWindow.open(map, marker); // 표출
                }
            }
        }

        for (var i=0, ii=markers.length; i<ii; i++) {
            console.log(markers[i] , getClickHandler(i));
            naver.maps.Event.addListener(markers[i], 'click', getClickHandler(i)); // 클릭한 마커 핸들러
        }
    }

</script>

</html>
